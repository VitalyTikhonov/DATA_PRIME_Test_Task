{"version":3,"sources":["css-variables-export-to-js.module.scss","components/Task/Task.js","components/Task/calendar-icon.png","components/Task/down-arrow.png","App.js","index.js"],"names":["module","exports","Task","props","isTemplate","onClick","useState","taskNameInputValue","setTaskNameInputValue","commentInputValue","setCommentInputValue","taskNameSpanValue","setTaskNameSpanValue","commentSpanValue","setCommentSpanValue","showSlashSeparator","setShowSlashSeparator","textFieldWrapperRef","useRef","taskNameFieldRef","commentWidthMachineRef","commentFieldRef","parseInputValue","value","matchResult","exec","task","commentMark","replaceSpaces","string","replace","normalizeTaskFieldOnBlur","event","target","name","trim","useEffect","handleBackspacePressing","current","key","focus","document","addEventListener","removeEventListener","className","type","ref","aria-hidden","placeholder","onChange","onBlur","autoFocus","getComputedStyle","width","console","log","src","alt","App","tasks","setTasks","map","index","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.16a26f3d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"TASK_FIELD_FONT_SIZE\":\"30px\",\"TASK_FIELD_LINE_HEIGHT\":\"1.2\"};","import \"./Task.scss\";\nimport { useState, useRef, useEffect } from \"react\";\nimport calendarIcon from \"./calendar-icon.png\";\nimport arrowIcon from \"./down-arrow.png\";\n// import { saveToLocalStorage } from \"../../utils/localStorageMethods\";\nimport { TASK_FIELD_FONT_SIZE, TASK_FIELD_LINE_HEIGHT } from \"../../css-variables-export-to-js.module.scss\";\n\nfunction Task(props) {\n  const { isTemplate, onClick } = props;\n\n  const [taskNameInputValue, setTaskNameInputValue] = useState(\"\");\n  const [commentInputValue, setCommentInputValue] = useState(\"\");\n\n  const [taskNameSpanValue, setTaskNameSpanValue] = useState(\"\");\n  const [commentSpanValue, setCommentSpanValue] = useState(\"\");\n\n  const [showSlashSeparator, setShowSlashSeparator] = useState(false);\n\n  const textFieldWrapperRef = useRef();\n  const taskNameFieldRef = useRef();\n  const commentWidthMachineRef = useRef();\n  const commentFieldRef = useRef();\n\n  function parseInputValue(value) {\n    const myRegexp = /(.*?)(\\/\\/) ?.*/;\n    let matchResult = myRegexp.exec(value);\n    return matchResult\n      ? /* Здесь не должно быть trim(), иначе невозможно ввести в поле пробел */\n        {\n          task: matchResult[1],\n          commentMark: matchResult[2],\n          // commentValue: matchResult[3],\n        }\n      : {\n          task: value,\n        };\n  }\n\n  /* для вставки в спаны-подложки значений, точно задающих ширину */\n  function replaceSpaces(string) {\n    return string.replace(/\\s+/g, \"-\");\n  }\n\n  function normalizeTaskFieldOnBlur(event) {\n    const { value, name } = event.target;\n\n    // const valueNormalized = value.trim();\n    /* бесполезно, так как на момент blur в стейте поля еще не успевает обновиться значение =>\n    оно там по-прежнему со слешами, а не пробелом, в конце =>\n    в case \"taskNameInput\" в функцию parseInputValue передается значение со слешами, и она отрабатывает\n    по первому сценарию (matchResult === true), то есть просто отрезает слеши,\n    а trim она содержать не может, иначе невозможно ввести в поле пробел. */\n\n    switch (name) {\n      case \"taskNameInput\":\n        const task = parseInputValue(value).task.trim();\n        setTaskNameInputValue(task);\n        setTaskNameInputValue(task);\n        break;\n      case \"commentInput\":\n        setCommentInputValue(value.trim());\n        break;\n      default:\n    }\n  }\n\n  function handleTaskNameFieldChange(event) {\n    const { value } = event.target;\n    const valueNormalized = value.replace(/\\s+/g, \" \");\n    const { task, commentMark } = parseInputValue(valueNormalized);\n\n    setTaskNameSpanValue(replaceSpaces(task));\n    setTaskNameInputValue(task);\n\n    if (commentMark) {\n      setShowSlashSeparator(true);\n\n      // setCommentSpanValue(\".\");\n      commentFieldRef.current.focus();\n    }\n  }\n\n  /* Заготовка для динамического ресайзинга поля для комментария.\n  На основе все того же решения из Интернета - см. сслку в App. */\n  function calcHeight(value) {\n    const taskFieldFontSize = parseInt(TASK_FIELD_FONT_SIZE, 10);\n    const taskFieldLineHeight = parseInt(TASK_FIELD_LINE_HEIGHT, 10);\n    const inputHeight = taskFieldFontSize * taskFieldLineHeight;\n    console.log('inputHeight', inputHeight);\n\n    let numberOfLineBreaks = (value.match(/\\n/g) || []).length;\n    // min-height + lines x line-height + padding + border\n    let newHeight = inputHeight + numberOfLineBreaks * inputHeight;\n    return newHeight;\n  }\n\n  /* Заменить на реф. */\n  // let textarea = document.querySelector(\".resize-ta\");\n  // textarea.addEventListener(\"keyup\", () => {\n  //   textarea.style.height = calcHeight(textarea.value) + \"px\";\n  // });\n\n  function handleTaskCommentFieldChange(event) {\n    const { value } = event.target;\n    setCommentSpanValue(replaceSpaces(value));\n    setCommentInputValue(value);\n    if (\n      getComputedStyle(commentWidthMachineRef.current).width >=\n      getComputedStyle(commentFieldRef.current).width\n    ) {\n      console.log('wide');\n    }\n  }\n\n  useEffect(() => {\n    function handleBackspacePressing(event) {\n      if (\n        event.target === commentFieldRef.current &&\n        !event.target.value &&\n        event.key === \"Backspace\"\n      ) {\n        setShowSlashSeparator(false);\n        setTaskNameInputValue(taskNameInputValue + \" \");\n        taskNameFieldRef.current.focus();\n      }\n    }\n\n    document.addEventListener(\"keydown\", handleBackspacePressing);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleBackspacePressing);\n    };\n  });\n\n  return (\n    <li\n      className={`task${showSlashSeparator ? \" task_commented\" : \"\"}${\n        isTemplate ? \" task_type_template\" : \"\"\n      }`}\n    >\n      {isTemplate ? (\n        <button\n          type=\"button\"\n          className=\"task__add-task-button\"\n          onClick={onClick}\n        >\n          Write a new task\n        </button>\n      ) : (\n        <form className=\"task__form\">\n          <label className=\"task__checkbox\">\n            {/* реальная галка */}\n            <input type=\"checkbox\" className=\"task__checkbox-proper\" />\n            {/* кастомная галка */}\n            <span className=\"task__checkbox-pseudo\"></span>\n          </label>\n\n          <label className=\"task__field\" ref={textFieldWrapperRef}>\n            <div className=\"task__field-width-assembly\">\n              <span className=\"task__field-width-machine\" aria-hidden=\"true\">\n                {taskNameSpanValue ? taskNameSpanValue : \"Write a new task\"}\n              </span>\n\n              <input\n                name=\"taskNameInput\"\n                type=\"text\"\n                className=\"task__field-proper task__field-proper_type_task task__field-proper_type_name\"\n                placeholder=\"Write a new task\"\n                ref={taskNameFieldRef}\n                value={taskNameInputValue}\n                onChange={handleTaskNameFieldChange}\n                onBlur={normalizeTaskFieldOnBlur}\n                autoFocus\n              />\n            </div>\n\n            {showSlashSeparator && (\n              <span className=\"task__field-slash-separator\">\n                &nbsp;//&nbsp;\n              </span>\n            )}\n\n            <div\n              className={`task__field-width-assembly${\n                showSlashSeparator\n                  ? \" task__field-width-assembly_type_comment\"\n                  : \"\"\n              }`}\n            >\n              {showSlashSeparator && (\n                <span\n                  className=\"task__field-width-machine task__field-width-machine_type_comment\"\n                  aria-hidden=\"true\"\n                  ref={commentWidthMachineRef}\n                >\n                  {commentSpanValue ? commentSpanValue : \"write a note\"}\n                </span>\n              )}\n\n              <input\n              // <textarea\n                name=\"commentInput\"\n                // rows=\"3\"\n                type=\"text\"\n                className={`task__field-proper task__field-proper_type_task task__field-proper_type_comment${\n                  showSlashSeparator\n                    ? \" task__field-proper_animate-placeholder\"\n                    : \"\"\n                }`}\n                placeholder=\"write a note\"\n                ref={commentFieldRef}\n                value={commentInputValue}\n                onChange={handleTaskCommentFieldChange}\n                onBlur={normalizeTaskFieldOnBlur}\n              />\n            </div>\n          </label>\n\n          <button type=\"button\" className=\"task__calendar-widget-opener\">\n            <img src={calendarIcon} alt=\"Значок календаря\" />\n          </button>\n\n          <label className=\"task__dropdown\">\n            <span className=\"task__list-color\"></span>\n            <input\n              type=\"text\"\n              className=\"task__field-proper task__field-proper_type_list-name\"\n              placeholder=\"No list\"\n            ></input>\n            <img\n              className=\"task__dropdown-arrow\"\n              src={arrowIcon}\n              alt=\"Стрелка раскрытия списка\"\n            />\n          </label>\n        </form>\n      )}\n    </li>\n  );\n}\n\nexport default Task;\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAMCAYAAABvEu28AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE4SURBVHgBlZLRUcJAEIb/PeBBn1ICJWAHsYOkAmUQ4fFKkAo431BkSAfYAZZACSkhTzKOSc7d84JBg8A/k7vL3ebL7n9LdyM9JSBCiXg+Nxucoduh7rUJa14migdtga5VWA/54GTIWHcdhBDwoxUPE38WQGElAadAOtZDRBYTknlwrxMi3MiaN9JPwnUyM+l/EKnim4HHxZPRVAWwV1Jr6F83+QXDjMn2IFoHna2DOAusxevi2cSyVlVQ/gHZqMzutbdY/c6m9Y5lBZHY4hL96mwHShKT5YSYA1O/FQ5GelnLeMrlR76cVGLrGRMaPGixB+Q94K8e3O9k9pCiwcM/IJG0gaXarXixJ1mhcNV0EY0gV8pYh7Cu2XbKS4YcaFp1CPQyM28l/ZjJ/vSTMzt/T9xjkcvuiL4AW9N4TZPkEAgAAAAASUVORK5CYII=\"","import \"./App.scss\";\nimport { useState } from \"react\";\n\n/* Заготовка для сохранения задач в LocalStorage */\n// import {\n//   getFromLocalStorage,\n//   saveToLocalStorage,\n// } from \"./utils/localStorageMethods\";\n\nimport Task from \"./components/Task/Task\";\n\nfunction App() {\n  const [tasks, setTasks] = useState([]);\n\n  // useEffect(() => {\n  //   const tasks = getFromLocalStorage(\"tasks\");\n  //   if (tasks) setTasks(tasks);\n  // }, []);\n\n  function addBlankTaskHandler() {\n    setTasks([...tasks, <Task />]);\n  }\n\n  return (\n    <div className=\"app\">\n      <ul className=\"task-list\">\n        {tasks.map((task, index) => (\n          <Task key={index} />\n        ))}\n        <Task\n          key={tasks.length + 1}\n          isTemplate={true}\n          onClick={addBlankTaskHandler}\n        />\n      </ul>\n    </div>\n  );\n}\n\nexport default App;\n\n/* КОММЕНТАРИИ\nДля динамического изменения ширины инпутов использовано одно из решений, описанных здесь https://css-tricks.com/auto-growing-inputs-textareas/,\nа именно https://codepen.io/chriscoyier/pen/XWbqpzP, так как оно представилось наиболее оптимальным\nиз всего, что удалось придумать и найти.\nВ нем при вводе текст попадает в \"загороженный\" инпутом спан, который автоматически ресайзится, влияя на ширину дива-родителя, а через него и на ширину инпута.\nОднако при этом не учитывалась длина пробелов - реализовал у себя их подмену на подчеркивания\nконкретно для этого спана.\n*/\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}